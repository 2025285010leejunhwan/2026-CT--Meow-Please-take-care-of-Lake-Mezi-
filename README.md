# 2026-CT--Meow-Please-take-care-of-Lake-Mezi-
option

# 🎣 매지호 수호신 곤지 - 야옹! 매지호를 부탁해

> **202X년 2학기 컴퓨팅사고 기말 프로젝트**
> **제작:** [컴퓨팅사고 YHX1001-12-00 4조]
> **사용 언어:** Python 3.x (Library: Pygame)

## 📖 프로젝트 개요
**"오염된 캠퍼스 호수(매지호)를 구하라!"**
이 프로젝트는 Pygame 라이브러리를 활용하여 개발된 **스토리 기반 낚시 시뮬레이션 게임**입니다.
플레이어는 호수의 수호신 '곤지'와 함께 오염된 물고기들을 정화하고, 각 스테이지를 클리어하며 최종 보스를 물리쳐야 합니다. 단순한 클릭 게임을 넘어, 물리 연산과 상태 머신(State Machine)을 도입하여 손맛 있는 낚시 경험을 구현했습니다.

---

## 💻 코드 구조 및 핵심 로직 (Code Architecture)

이 게임은 객체 지향 프로그래밍(OOP) 원칙에 따라 설계되었으며, 크게 **게임 상태 관리**, **낚시 메커니즘**, **엔티티(플레이어/물고기)**로 구성되어 있습니다.

### 1. 게임 상태 관리 (Game State Management)
게임의 흐름을 효율적으로 제어하기 위해 **State Pattern**을 사용했습니다. `Game` 클래스가 현재 상태를 관리하며, 각 장면은 독립적인 클래스로 구현되어 있습니다.

* **`Game` 클래스:** 메인 컨트롤러입니다. `self.state` 변수를 통해 현재 화면을 저장하고, `change()` 메서드로 화면을 전환합니다.
* **주요 상태 클래스:**
    * `StartScreen`: 게임 시작 화면 및 입력 대기.
    * `Lobby`: 캐릭터가 이동하며 센터나 낚시터로 이동할 수 있는 허브 맵.
    * `FishingMap`: 실제 낚시가 이루어지는 핵심 게임플레이 공간.
    * `EnvCenter`: 스토리 진행 및 낚싯대 업그레이드가 이루어지는 장소.
    * `Cutscene`: 스토리 전달을 위한 대화 및 연출 화면.

### 2. 낚시 시스템 (Fishing System Logic)
`FishingSystem` 클래스는 낚시의 시작부터 종료까지의 모든 과정을 **유한 상태 기계(FSM)**로 구현했습니다.

* **상태 전이:** `IDLE` → `CHARGING`(힘 모으기) → `CASTING`(찌 던지기) → `FLOATING`(대기) → `BITE`(입질) → `HOOK_QTE`(챔질) → `REELING`(릴 감기) → `RESULT`(결과)
* **물리 연산 (Casting Logic):**
    * `pygame.Vector2`를 사용하여 찌의 시작점과 목표 지점을 벡터로 계산합니다.
    * `lerp` (선형 보간) 함수를 사용하여 찌가 포물선을 그리며 날아가는 애니메이션을 구현했습니다.
* **텐션(Tension) 알고리즘:**
    * 플레이어가 당기는 힘(`reel_up`)과 물고기의 저항(`pull_force`)을 실시간으로 계산합니다.
    * `clamp` 함수를 사용하여 게이지가 0~100 범위를 벗어나지 않도록 제어하며, 한계치 도달 시 줄이 끊어지는 로직을 포함합니다.

### 3. 보스전 설계 (Boss Battle Logic)
최종 스테이지(거북섬)의 보스전은 일반 낚시와 다른 독자적인 알고리즘을 가집니다.

* **거리 기반 시스템:** 일반 물고기처럼 체력을 깎는 것이 아니라, `boss_distance`(거리)를 0으로 만들어야 합니다.
* **광분 패턴 (Rage Mode):**
    * 타이머(`boss_rage_timer`)를 두어 보스가 주기적으로 '광분 상태'와 '일반 상태'를 오갑니다.
    * **일반 상태:** 스페이스바 연타 시 거리가 줄어듭니다.
    * **광분 상태:** 스페이스바를 누르면 오히려 텐션이 급격히 상승하는 패널티를 부여하여, 플레이어의 순발력과 판단력을 요구합니다.
* **시각적 피드백:** 보스의 상태에 따라 텍스트 색상 변경 및 화면 점멸 효과를 주어 긴장감을 조성했습니다.

### 4. 리소스 관리 (Asset Management)
* **안전한 로딩 (`load_img_safe`):** 이미지 파일이 없거나 확장자(.jpg/.png)가 달라도 프로그램이 멈추지 않도록 예외 처리(Try-Except)를 적용했습니다.
* **사운드 버퍼링:** 효과음 딜레이를 방지하기 위해 게임 시작 시 `SFX_BUFFERS` 딕셔너리에 사운드 데이터를 미리 로드합니다.

---

## 🕹️ 게임 플레이 방법

| 동작 | 키보드/마우스 | 설명 |
| :--- | :---: | :--- |
| **이동** | `방향키` or `WASD` | 로비 및 맵에서 캐릭터 이동 |
| **상호작용** | `SPACE` | NPC 대화, 보스전 당기기, 컷신 넘기기 |
| **낚시 캐스팅** | `마우스 왼쪽 (LMB)` | 꾹 눌러서 게이지를 채운 뒤 놓아서 던지기 |
| **릴링 (감기)** | `마우스 왼쪽 (LMB)` | 물고기가 걸렸을 때 클릭/홀드하여 당기기 (텐션 조절 필수) |
| **메뉴/도감** | `ESC` / `C` | 로비로 돌아가기 / 현재 스테이지 도감 확인 |

---
